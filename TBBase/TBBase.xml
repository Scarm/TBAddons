<Ui xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.blizzard.com/wow/ui/">
	<Frame name="IndicatorFrame" parent="UIParent" FrameStrata="HIGH">
		<Anchors>
			<Anchor point="TOPLEFT"></Anchor>
		</Anchors>
		<Size>
			<AbsDimension x="245" y="10" />
		</Size>		
		<Layers>
            <Layer level="BACKGROUND">
                <Texture name="$parentTex" parentKey="Tex">	
					<Anchors>
                        <Anchor point="TOPLEFT"/>
						<Anchor point="BOTTOMRIGHT"/>
                    </Anchors>
                    <Color g="0" r="1" b="0"/>                    
				</Texture>
                </Layer>
		</Layers>
        
		<Scripts>
			<OnLoad>
				TBSubscribeEvent(self,"PLAYER_LOGIN", "TBOnPlayerLogin")
				TBSubscribeEvent(self,"SPELLS_CHANGED", "TBCreateSpellMaps")
				TBSubscribeEvent(self,"UNIT_SPELLCAST_SENT", "TBClearControls")
				TBSubscribeEvent(self,"ACTIVE_TALENT_GROUP_CHANGED", "TBAssignBot")
				
				TBSubscribeEvent(self,"UNIT_SPELLCAST_CHANNEL_START", "TBLastCastUpdate")
				--TBSubscribeEvent(self,"UNIT_SPELLCAST_CHANNEL_STOP", "TBLastCastUpdateFailed")
				TBSubscribeEvent(self,"UNIT_SPELLCAST_CHANNEL_UPDATE", "TBLastCastUpdate")
				TBSubscribeEvent(self,"UNIT_SPELLCAST_DELAYED", "TBLastCastUpdate")
				TBSubscribeEvent(self,"UNIT_SPELLCAST_INTERRUPTED", "TBLastCastUpdateFailed")
				TBSubscribeEvent(self,"UNIT_SPELLCAST_START", "TBLastCastUpdate")
				--TBSubscribeEvent(self,"UNIT_SPELLCAST_STOP", "TBLastCastUpdateFailed")
				TBSubscribeEvent(self,"UNIT_SPELLCAST_SUCCEEDED", "TBLastCastUpdate")
				
				TBSubscribeEvent(self,"PLAYER_ENTER_COMBAT", "TBEnterCombat")
				TBSubscribeEvent(self,"PLAYER_LEAVE_COMBAT", "TBLeaveCombat")
				
				--TBSubscribeEvent(self,"COMBAT_LOG_EVENT_UNFILTERED", "TBCombatLog")
				--TBSubscribeEvent(self,"UPDATE_MOUSEOVER_UNIT", "TBMouseOver")
			</OnLoad>
			<OnUpdate>
				TBOnUpdate()
			</OnUpdate>
		</Scripts>
	</Frame>
	
	<Button name="AutomatonFrameTemplate" virtual="true" inherits="SecureActionButtonTemplate" FrameStrata="HIGH">
        <Size>
            <AbsDimension x="5" y="5"/>
        </Size>
		<Layers>
            <Layer level="BACKGROUND">
                <Texture name="$parentTex" parentKey="Tex">
					<Anchors>
                        <Anchor point="TOPLEFT"/>
						<Anchor point="BOTTOMRIGHT"/>
                    </Anchors>
				</Texture>
            </Layer>
		</Layers>
	</Button>
	
	<CheckButton name="TBButtonTemplate" inherits="ActionButtonTemplate" virtual="true">
		<Scripts>
			<OnLoad>
				self:RegisterForClicks("LeftButtonUp")
			</OnLoad>
            <OnClick>
                print("Click!")
            </OnClick> 
		</Scripts>
	</CheckButton>
	
	<Frame name="PanelFrame" parent="UIParent" FrameStrata="HIGH" toplevel="true" enableMouse="true" Movable="true">
		<Anchors>
			<Anchor point="CENTER"></Anchor>
		</Anchors>
		<Size>
			<AbsDimension x="5" y="10" />
		</Size>		
		<Layers>
            <Layer level="BACKGROUND">
                <Texture name="$parentTex" parentKey="Tex">	
					<Anchors>
                        <Anchor point="TOPLEFT"/>
						<Anchor point="BOTTOMRIGHT"/>
                    </Anchors>
                    <Color g="0" r="1" b="0" a="0.5"/>                    
				</Texture>
                </Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				self:RegisterForDrag("RightButton")
			</OnLoad> 
            <OnDragStart>
				self:StartMoving()
            </OnDragStart>
            <OnDragStop>
				self:StopMovingOrSizing()
            </OnDragStop>
			<OnUpdate>

			</OnUpdate>
		</Scripts> 
	</Frame>
</Ui>